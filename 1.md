# Ubuntu 基础配置

#### 以最新 Ubuntu 14.04 LTS为例

## 双系统引导

### 单硬盘安装 Windows 和 Linux 双系统
1. 按照如下表格，设定分区，Grub 安装到 /boot 分区

|分区格式|挂载点|分区大小|位置|
|:------:|:-----:|:-------:|:-----|
|EXT4|/|45 GiB|/dev/sdb2|
|EXT3|/boot|200 MiB|/dev/sdb7|
|——|swap|512 MiB|/dev/sdb8|
|EXT4|/usr| 50 GiB|/dev/sdb9|
|EXT4|/var| 18 GiB|/dev/sdb10|
|EXT4|/home| 60 GiB|/dev/sdb11|

2. 进入 Live USB 模式

    sudo dd if=/dev/sdb7 of=ubuntu.pbr bs=512 count=1  # mbr 文件名任意，与下面一致

3. 进入 Win 系统，拷贝 ubuntu.pbr 到 C 根目录，然后分别执行以下内容

    bcdedit /enum >> c:\list.txt //导出一个名为list的文本文件，包含目前的配置
    bcdedit /create /d "ubuntu" /application bootsector   //新建一个启动项，下文{ID}之的就是这个值
    bcdedit /set {ID} device partition=c:   //设置MRB文件所在的分区
    bcdedit /set {ID} path \ubuntu.pbr  //设置MRB文件所在的路径
    bcdedit /displayorder {ID} /addlast  //添加启动项到最后
    bcdedit /default {ID}//设置默认启动项为ubuntu 
    bcdedit /timeout 3   //设置时间为3s

4. （可选） NTbootautofix 更改 bootmgr 为 Legacy 模式，更改超时时间


### 双硬盘安装 Windows 和 Linux 双系统 （每个盘一个系统）
1. 安装类似单硬盘，正常分区，一般 / 和 /boot 分为 主分区，Grub 安装在 Linux 所在硬盘上，不在分区中

2. 在 Win 下使用 EasyBCD 添加新条目->Linux/BSD->新版本添加一个 Grub2 的，老版本添加 Grub（Legacy），看见\NST\AutoNeoGrub0.mbr 这个项就成功了

## 上网 （PPPoE）

### 终端命令配置
1. 打开终端配置上网

    sudo pppoeconf

开始配置上网，出来的是终端界面，因为是笔记本记得还有一个让选择网卡的，选择有线猫的那个就行，之后输入宽带用户名 `删除username` 和密码。
 
2. 联网：

    sudo pon dsl-provider
 
3. 断网：

    sudo poff
 
4. 查看日志（ 断网下）

    plog
 
5. 查看接口信息（ 联网下）

    ifconfig ppp0

 
### 图形界面方法

> 点击任务栏右上角联网图标，“编辑连接”选择“DSL”，添加：
> 用户名：你宽带的用户名
> 服务： 一般不变
> 密码：宽带用户对应的密码
> Ipv4设置：自动
> PPPoE勾上自动连接，每次开机只需要点击右上角的DSL ******（连接名称自己改一个，我的为ADSL） 连接就可以了！
 
 
### 频繁断网问题解决办法：
 
检查pppoe的配置文件（/etc/ppp/options），看到其中的两条：

    lcp-echo-failure 4
    lcp-echo-interval 30

意思大概为30秒内联接4次失败就断网，把4改成20试了试。我索性改成了30，这样之后就没出现过断网事件！

## 软件源

    sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup

先备份原来的文件，保留

> extras.ubuntu.com
> security.ubuntu.com

使用如下软件源

    #------------------ubuntu14.04 trusty(sohu#山东网通用户强烈建议#)-----------------------#
    deb http://mirrors.sohu.com/ubuntu/ trusty multiverse universe restricted main 
    deb http://mirrors.sohu.com/ubuntu/ trusty-updates multiverse universe restricted main 
    deb http://mirrors.sohu.com/ubuntu/ trusty-backports multiverse universe restricted main 
    deb http://mirrors.sohu.com/ubuntu/ trusty-security multiverse universe restricted main 
    deb http://mirrors.sohu.com/ubuntu/ trusty-proposed multiverse universe restricted main 
    
    
    #-------------ubuntu14.04 trusty(163#网易电信网通双线接入网速杆杆的#)-----------------#
    deb http://mirrors.163.com/ubuntu/ trusty main multiverse restricted universe  
    deb http://mirrors.163.com/ubuntu/ trusty-security main multiverse restricted universe 
    deb http://mirrors.163.com/ubuntu/ trusty-updates main multiverse restricted universe 
    deb http://mirrors.163.com/ubuntu/ trusty-proposed universe restricted multiverse main 
    deb http://mirrors.163.com/ubuntu/ trusty-backports main multiverse restricted universe 
    
    
    #-------------------ubuntu14.04 trusty(taiwan)--------------------------#
    # deb http://tw.archive.ubuntu.com/ubuntu/ trusty multiverse universe restricted main  
    # deb http://tw.archive.ubuntu.com/ubuntu/ trusty-security multiverse universe restricted main  
    # deb http://tw.archive.ubuntu.com/ubuntu/ trusty-updates multiverse universe restricted main  
    # deb http://tw.archive.ubuntu.com/ubuntu/ trusty-proposed multiverse universe restricted main  
    # deb http://tw.archive.ubuntu.com/ubuntu/ trusty-backports multiverse universe restricted main 
    
    
    #-------------------ubuntu14.04 trusty(上海交通大学)--------------------------#
    deb http://ftp.sjtu.edu.cn/ubuntu/ trusty universe restricted multiverse main 
    deb http://ftp.sjtu.edu.cn/ubuntu/ trusty-security universe restricted multiverse main 
    deb http://ftp.sjtu.edu.cn/ubuntu/ trusty-updates universe restricted multiverse main 
    deb http://ftp.sjtu.edu.cn/ubuntu/ trusty-proposed universe restricted multiverse main 
    deb http://ftp.sjtu.edu.cn/ubuntu/ trusty-backports universe restricted multiverse main 
    
    
    #-------------------ubuntu14.04 trusty(北京交通大学)--------------------------#
    deb http://mirror.bjtu.edu.cn/ubuntu/ trusty universe restricted multiverse main 
    deb http://mirror.bjtu.edu.cn/ubuntu/ trusty-security universe restricted multiverse main 
    deb http://mirror.bjtu.edu.cn/ubuntu/ trusty-updates universe restricted multiverse main 
    deb http://mirror.bjtu.edu.cn/ubuntu/ trusty-proposed universe restricted multiverse main 
    deb http://mirror.bjtu.edu.cn/ubuntu/ trusty-backports universe restricted multiverse main

其中 163 网易的源测试起来比较好

## apt-get 配置
1. 方法一：利用配置文件

    touch /etc/apt/apt/apt.conf  // 创建空文件之后去 doc 中有 example
    sudo gedit /etc/apt/apt.conf

添加

    Acquire::http::Proxy “http://yourproxyaddress:proxyport”;
    Acquire::https::Proxy “http://yourproxyaddress:proxyport”;
    Acquire::ftp::Proxy “http://yourproxyaddress:proxyport”;

之后使用命令

    sudo apt-get -c=/path/to/apt.conf update

2. 方法二：直接命令设置apt-get代理

    sudo apt-get -o Acquire::http::proxy="http://127.0.0.1:8087/" update

### 常用 apt-get 实例

> apt-cache search packagename                         搜索包
> apt-cache show packagename                           获取包的相关信息，如说明、大小、版本等
> apt-get install packagename                           安装包
> apt-get install packagename --reinstall               重新安装包
> apt-get -f install                                    修复安装 ”-f = –fix-missing”
> apt-get remove packagename                            删除包
> apt-get remove packagename --purge                   删除包，包括删除配置文件等
> apt-get update                                       更新源
> apt-get upgrade                                      更新已安装的包
> apt-get dist-upgrade                                   升级系统
> apt-get dselect-upgrade                              使用 dselect 升级
> apt-cache depends packagename                       了解使用依赖
> apt-cache rdepends packagename                      是查看该包被哪些包依赖
> apt-get build-dep packagename                       安装相关的编译环境
> apt-get source packagename                          下载该包的源代码
> apt-get clean                                       清理无用的包
> apt-get autoclean                                   清理无用的包
> apt-get check                                       检查是否有损坏的依赖
> apt-get autoremove                                  自动移除包

## 改变桌面程序

### 从 Unity 转为 GNOME
> *【首先请确保没有设置自动登录】*

1. 安装GNOME 3

    sudo apt-get install gnome-shell
    sudo apt-get install gnome-tweak-tool
    sudo apt-get install gnome-themes*   // 或者简单的选择 sudo apt-get install gnome-themes-standard
    /*  GNOME  2*/
    sudo apt-get install gnome-session-fallback
    sudo apt-get install gnome-panel  // 或者这个

2. 如果希望自动登录，这时候可以做的是：

    sudo /usr/lib/lightdm/lightdm-set-defaults -s gnome-classic //自动登入GNOME SHELL CLASSIC
    sudo /usr/lib/lightdm/lightdm-set-defaults -s gnome-shell  //如果喜欢GNOME3 

3. 删除UNITY：

    sudo apt-get -y --auto-remove purge unity
    sudo apt-get -y --auto-remove purge unity-common
    sudo apt-get -y --auto-remove purge unity-lens*
    sudo apt-get -y --auto-remove purge unity-services
    sudo apt-get -y --auto-remove purge unity-asset-pool

> 注意：不能用 sudo apt-get --auto-remove purge unity*    unity-greeter 必须保留

## 改变输入法

### 从 iBus 转为 Fcitx
1. 卸载Ibus输入法

    sudo apt-get remove ibus      // 或者使用 sudo apt-get purge ibus
2. 安装fcitx输入法，之后重启

    sudo apt-get install im-switch fcitx
    sudo im-switch -s fcitx -z default
    im-switch -s fcitx -z default

3. 切换默认输入法

    im-switch -c

4. 修改配置

    gedit ~/.fcitx/config

    [界面]
    候选词个数=5
    主窗口是否使用3D界面=0
    输入条使用3D界面=0
    主窗口隐藏模式=1
    显示虚拟键盘=0
    是否自动隐藏输入条=1
    输入条是否居中=0
    首次显示输入条=1
    #输入条固定宽度(仅适用于码表输入法)，0表示不固定宽度
    输入条固定宽度=0
    输入条偏移量X=0
    输入条偏移量Y=12
    序号后加点=1
    显示打字速度=1
    显示版本=1
    光标色=102 159 66
    主窗口背景色=255 255 255
    主窗口线条色=255 255 255
    主窗口输入法名称色=153 153 153 102 159 66 56 134 230
    输入窗背景色=255 255 255
    输入窗提示色=2 89 196
    输入窗用户输入色=255 0 132
    输入窗序号色=0 66 200
    输入窗第一个候选字色=0 99 200
    #该颜色值只用于拼音中的用户自造词
    输入窗用户词组色=0 99 200
    输入窗提示编码色=255 0 132
    #五笔、拼音的单字/系统词组均使用该颜色
    输入窗其它文本色=56 134 230
    输入窗线条色=255 255 255
    输入窗箭头色=193 227 151
    虚拟键盘窗背景色=220 220 220
    虚拟键盘窗字母色=80 0 0
    虚拟键盘窗符号色=0 0 0

## 安装显卡驱动

### 单独立显卡安装 手工安装Ubuntu nvidia驱动


1. 官方下载最新的Ubuntu nvidia驱动 类似 NVIDIA-Linux-x86-173.14.12.run
2. 删除原Ubuntu nvidia驱动包

    sudo apt-get –purge remove nvidia-glx nvidia-glx-new
    sudo apt-get –purge remove nvidia-settings nvidia-kernel-common

3. Ubuntu nvidia安装头文件和编译环境

    sudo apt-get install linux-headers-$(uname -r) build-essential

4. 禁止系统使用默认的驱动 此步骤可以两次运行 NVIDIA-Linux-x86-173.14.12.run 文件，第一次运行有提示添加屏蔽 nouveau 驱动的步骤，添加之后重启，然后再运行即可安装，每次运行之前必须关闭 X Server

    sudo gedit /etc/default/linux-restricted-modules-common  // 最后的双引号中添加nv，即“”改成“nv”

5. 备份当前的显示设置，预防启动X失败时恢复到原来的设置

    sudo cp /etc/X11/xorg.conf /etc/X11/xorg.conf.backup

6. 接着离开桌面执行，按Ctrl＋Alt＋F1，登录，停止gdm (或lightdm)

    sudo /etc/init.d/gdm stop
    sudo service lightdm stop

7. 开始安装

    cd /path/to/nvidia-linux-x86-1.0-9631-pkg1.run
    (sudo) chmod +x nvidia-linux-x86-1.0-9631-pkg1.run
    sudo ./nvidia-linux-x86-1.0-9631-pkg1.run

>进入安装界面后，首先接受协议，选“接受”，提示有旧驱动，询问是否删除旧驱动，选Yes； 提示缺少某某模块（modules），询问是否上网下载，选no； 提示编译模块，询问是否进行编译，选ok； 提示将要修改xorg.conf，询问是否答应，选Yes

8. 安装完成回到终端，重启GDM
    sudo /etc/init.d/gdm start
    sudo service lightdm start

>此时会看到NV的logo，驱动安装成功。

9. 查看显卡是否装好
    glxinfo | grep rendering

>显示”direct rendering: Yes”，则已安装

10. 宽屏改变分辨率

    sudo nvidia-settings

>进入便可以改变分辨率。必须用root权限运行，否则配置无法保存到xorg.conf里面。

11. 安装完Ubuntu nvidia驱动后，莫名奇妙的出现：打开各类窗口，发现窗口右上方的最小化、还原、关闭按钮都不见了，整个顶部标题栏都消失了，更改外观主题也没有用。以为是窗口管理器的问题，在网上找了很多方法都不行，最后发现
    metacity - -replace
就能OK。

### 笔记本双显卡安装

待定


## FireFox 配置 Adobe Flash Player Plugin

1. FireFox升级最新版本
2. 从adobe官方网站下载flash的安装包（install_flash_player_xx_linux.<architecture>.tar.gz）
3. 执行以下命令
 
    tar zxvf install_flash_player_xx_linux.<architecture>.tar.gz
    cp libflashplayer.so /usr/lib/mozilla/plugins/
    ln -sf /usr/lib/mozilla/plugins/libflashplayer.so /usr/lib/firefox-addons/plugins/
    ln -sf /usr/lib/mozilla/plugins/libflashplayer.so  /usr/lib/xulrunner-addons/plugins/
 
4. 未尽事宜参照包中 README
5. 重启浏览器


## 科学上网工具配置

##### 注意导入 CA 证书到浏览器中

### Goagent
1. 安装基础依赖

|名称|作用|是否必选|
|:----:|:-----|:---:|
|python2|建议安装python2.7，如需在Linux上传或安装gevent需先安装python-dev| Y|
|gevent 1.0|提升多线程性能，强烈建议安装| N|
|greenlet|gevent的依赖，一般安装gevent会自动安装| N|
|python-vte|基于GTK的简单GUI所需| N|
|python-openssl|生成证书所需，强烈建议安装，如删除了goagent自动证书则必须安装|N|
|pycrypto|RC4加密所需，建议安装|N|
|python-appindicator|Unity桌面下的托盘组件，其他桌面不必安装|N|

    sudo apt-get install python-dev python-greenlet python-gevent python-vte python-openssl python-crypto python-appindicator

如果gevent版本是0.13则需要用下面的方法安装1.0版，python-appindicator为ubuntu专有，其他系统用户不用管,python-vte 位gtk托盘窗口所需，其他发行版请自行根据对应系统安装所需软件

2. 安装gevent

> 需要在安装 python-dev 之后才能正确安装 gevent 和上传server，安装gevent需要安装了 gcc(Linux/Unix) 或 xcode(Mac OSX)。

    sudo apt-get install python-dev python-pip && sudo pip install gevent --upgrade

也可以手动编译安装

如果greenlet版本低于0.4.0会导致gevent装不上，请先使用以下命令安装greenlet（0.4.2）

    wget http://mirrors.aliyun.com/pypi/packages/source/g/greenlet/greenlet-0.4.2.zip && unzip greenlet-0.4.2.zip && cd greenlet-0.4.2 && sudo python setup.py install

安装gevent（1.0）

    wget http://mirrors.aliyun.com/pypi/packages/source/g/gevent/gevent-1.0.tar.gz && tar xvzpf gevent-1.0.tar.gz && cd gevent-1.0 && sudo python setup.py install

如果不想安装gevent可以下载 gevent-1.0-py2.7-linux.egg gevent-1.0dev-macosx-intel.egg 放local文件夹

3. 上传

    cd /path/to/goagent/server
    python uploader.zip

4. 运行

    cd /path/to/goagent/local
    python proxy.py

也可以赋予proxy.py可执行权限之后直接双击proxy.py。（在proxy.py上面右击，属性的权限中勾选允许以程序执行文件）

直接运行goagent-gtk.py可以使用gtk托盘方式运行goagent。 运行addto-startup.py即可加入开机启动。也可以自行添加一个启动项，命令为

    python /path/to/goagent/local/goagent-gtk.py

其中路径修改为自己系统中goagent-gtk.py的路径 使用sudo提权之后可以自动导入证书，部分浏览器请自行手动导入证书

5. 退出

如果是直接终端使用"python proxy.py"运行，在终端按"Ctrl+C"组合键可终止运行;如果使用gtk托盘，在托盘图标上右键菜单有退出选项。直接关闭终端窗口也会退出。如果以后台进程运行，先用"ps aux | grep proxy.py"找到goagent的PID，然后直接kill对应的PID 。

    ps aux|grep proxy.py|grep -v "grep"|awk '{print $2}'|xargs kill

### Wallproxy

1. 基本同 Goagent 配置

附上appid列表

Wallproxy:

> wongloveg21|wongloveg22|wongloveg23|wongloveg24|wongloveg25|wongloveg26|wongloveg27|wongloveg28|wongloveg29|wongloveg30|wongloveg09|wongloveg10|wongloveg31|wongloveg32|wongloveg33|wongloveg34|wongloveg35|wongloveg36|wongloveg37|wongloveg38|wongloveg39|wongloveg40|wongloveg41|wongloveg42|wongloveg43|wonglovehtc|wongloveg11|wongloveg12|wongloveg13|wongloveg14|wongloveg15|wongloveg16|wongloveg17|wongloveg18|wongloveg19|wongproxy001|wongproxy002|wongproxy003|wongproxy004|wongproxy005|wongproxy006|wongproxy007|wongproxy008|wongproxy009|wongproxy010|wongproxy011|wongproxy012|wongproxy013|wongproxy014|wongproxy015|fancproxy001|fancproxy002|fancproxy003|fancproxy004|fancproxy005|fancproxy006|fancproxy007|fancproxy008|fancproxy009|fancproxy010|fancproxy011|fancproxy012|fancproxy013|fancproxy014|fancproxy015|fancproxy016|fancproxy017|fancproxy018|fancproxy019|fancproxy020|fancproxy021|fancproxy022|fancproxy023|fancproxy024|fancproxy025|maziproxy001|maziproxy002|maziproxy003|maziproxy004|maziproxy005|maziproxy006|maziproxy007|maziproxy008|maziproxy009|maziproxy010|maziproxy011|maziproxy012|maziproxy013|maziproxy014|maziproxy015|maziproxy016|maziproxy017|maziproxy018|maziproxy019|maziproxy020|maziproxy021|maziproxy022|maziproxy023|maziproxy024|maziproxy025

Goagent:

> qq541236405|wonglikewin8|syronelikewin8|qqlikewin8|hjjingyi|hjjingyilovewin8|qqlovewin8|syronelovewin8|wonglovewin8|huotui026|huotui027|huotui028|huotui029|huotui030|huotui031|huotui032|huotui033|huotui034|huotui035|huotui036|huotui037|huotui038|huotui039|huotui040|huotui001|huotui002|huotui003|huotui004|huotui005|huotui006|huotui007|huotui008|huotui009|huotui010|huotui011|huotui012|huotui013|huotui014|huotui015|huotui016|huotui017|huotui018|huotui019|huotui020|huotui021|huotui022|huotui023|huotui024|huotui025|wongloveg20|wongloveg01|wongloveg02|wongloveg03|wongloveg04|wongloveg05|wongloveg06|wongloveg07|wongloveg08|wongloveg44|wongloveg45|wongloveg46|wongloveg47|wongloveg48|wongloveg49|wongloveg50|wongloveg51|wongloveg52|wongloveg53|wongloveg54|wongloveg55|wongloveg56|wongloveg57|wongloveg58

### 其他应用
1. 设置 git 代理，终端输入

    export https_proxy="127.0.0.1:8087"
    export http_proxy="127.0.0.1:8087"
    git config --global http.sslVerify false

这样git clone就是走代理了，其实这个设置完以后apt-get的操作也是通过代理的了

2. 设置 apt-get 代理，见上文

## Vim 编译安装

1. 首先清除自带的老版本

    sudo apt-get purge vim vim-common vim-runtime
 
> 通过UBUNTU源安装的VIM不带有GDB调试功能

2. 安装相应库


    sudo apt-get install build-essential  //安装编译工具
    sudo apt-get build-dep vim-gtk   //安装编译vim－gtk的依赖包
    sudo apt -get install libncurses5-dev   //安装ncurses开发包

如果不安装ncurses开发包，make时会产生如下错误：
> no terminal library found
> checking for tgetent()... configure: error: NOT FOUND!
>      You need to install a terminal library; for example ncurses.
>      Or specify the name of the library with --with-tlib. 
 
3. 下载源码

首先我们需要下载VIM的源码，假设把代码放到~/install/目录，文件名为vim-7.2.tar.bz2

4. 下载vimgdb补丁
 
接下来，我们需要下载vimgdb补丁，下载页面在：
 
http://sourceforge.net/project/showfiles.php?group_id=111038&package_id=120238
 
在这里，选择vim 7.2的补丁，把它保存到~/install/vimgdb72-1.14.tar.gz。
 
5. 打补丁
 
运行以下命令，解压VIM源码，并打上补丁
 
    cd ~/install
    tar xjvf vim- 7.2.tar.bz2  //会在~/install目录下生成一个vim72目录
    tar xzvf vimgdb72-1.14.tar.gz  //会在~/install目录下生成一个vimgdb目录
    patch -d vim72 --backup -p0 < vimgdb/vim72.diff

6. 定制VIM功能
 
缺省的VIM配置已经适合大多数人，但有些时候你可能需要一些额外的功能，这时就需要自己定制一下VIM。定制VIM很简单，进入~/install/vim72/src文 件，编辑Makefile文件。这是一个注释很好的文档，根据注释来选择：
 
    cd ~/install/vim72/src
    sudo vim Makefile
 
然后修改配置
 
-gtk2支持,也能使用gnome，打开 `--enable-gui=gkt2`
 
-最大特性 支持,打开 `--with-features=huge` (必须打开，否则编译成功vim，运行后设置语法高亮时，产生如下错误
 
>     Vim: Caught deadly signal ABRT
>  
>      Vim: Finished.
>  
>      Aborted)
 
 - 如果你想把perl, python, tcl, ruby等接口编译进来的话，打开相应的选项，例如，我打开了--enable-tclinterp选项；
 
- 如果你想在VIM中使用cscope的话，打开 `--enable-cscope` 选项；
 
- 我们刚才打的vimgdb补丁，自动在Makefile中加入了 `--enable-gdb` 选项；
 
- 如果你希望在vim使用中文，使能`--enable-multibyte` 和 `--enable-xim`选项；
 
- 可以通过--with-features=XXX选项来选择所编译的VIM特性集，缺省是--with-features=normal；
 
- 如果你没有root权限，可以把VIM装在自己的home目录，这时需要打开prefix = $(HOME)选项；这里 我打开了这一项，把VIM安装在home目录下。
 
编辑好此文件后，就执行可以编辑安装vim了。如果你需要更细致的定制VIM，可以修改config.h文件，打开/关闭你想要的特性。
 
7. 编译安装
 
在 `~/install/vim72/src` 目录下
 
执行

    make CFLAGS="-O2 -D_FORTIFY_SOURCE=1"

执行make时，加上 CFLAGS="-O2 -D_FORTIFY_SOURCE=1" 选项，如果直接执行make，VIM也能编译成功，但运行时会出现“Vim: Caught deadly signal ABRT”错误，具体请参考“http://forum.ubuntu.org.cn/viewtopic.php?f=122&t=240806”
 
make执行完成之后，安装编译好的VIM，在~/install/vim72/src目录下执行如下命令
 
    sudo make install
 
这样，VIM就被安装到了~/bin目录下，其它相关文件在~/share/vim目录下
  
8. 安装 vimgdb 的 runtime 文件
 
运行下面的命令，解压vimgdb的runtime文件到你的~/.vim/目录，如果没有~/.vim 目录，则执行命令mkdir ~/.vim创建
 
    cd ~/install/vimgdb/
    tar zxf vimgdb_runtime.tgz –C~/.vim/
 
切换到~/bin目录下，启动我们自己编译的VIM，注意：这是不能直接通过输入VIM命令来启动刚才编译的VIM，因为在编译安 装VIM之前，已经通过UBUNTU的源安转过了VIM，所以要想启动刚才编译安装的VIM，应该进入到~/bin目录下，通过如下方式启动
 
    cd ~/bin
    ./vim
 
在VIM中运行下面的命令以生成帮助文件索 引：
 
    :helptags ~/.vim/doc
 
现在，你可以使用 `:help vimgdb` 命令查看vimgdb的帮助了。
 
至此重新编译了VIM，并为之打上了vimgdb补丁
 
9. 简单配置VIM
 
编译安装的VIM，不能高亮显示C语言语法，不能显示行号，对gdb的按键没有映射。因此为了实现上述配置，在~目录下建 立.vimrc文件
 
    vim ~/.vimrc
 
然后输入以下内容：
 
    nmap <F2> :run macros/gdb_mappings.vim<CR>
    syntax on
    set nu

保存退出

10. 把编译的VIM代替先前的VIM

执行如下命令，就可以把自己编译的VIM，代替以前安装的VIM，以后启动VIM时，就不需要在切换到~/bin目录下，直接输入VIM，就可以启动自己 编译的VIM

    sudo rm /etc/alternatives/vim  
    sudo rm /etc/alternatives/vimdiff 
    sudo ln -s ~/bin/vim /etc/alternatives/vim  
    sudo ln -s ~/bin/vimdiff /etc/alternatives/vimdiff

11. 程序调试
 
 假设在家目录下建立test.c测试文件，内容如下：
``` c
#include <stdio.h>
int main()
{
    printf("Hello World!!!\n");
    return 0;
}
```

在家目录下创建Makefile文件，内容如下：

> test:test.c
>        gcc -g -o test test.c

然后用VIM打开test.c，假设VIM的当前工作目录为~（如果不是，使用:cd ~命令切换）
在VIM中，输入命令:make，使用Makefile对test.c进行编译，如果编译出错，VIM会跳到第一个出错的位置，改完后，用“:cnext”命令跳到下一个错误，以此类推。

现在，假设已经完成链接，生成了最终的test文件，好了，我们现在按空格键，在当前窗口下方会打开一个小窗口(command-line窗口)，这就是 vimgdb 的命令窗口，可以在这个窗口中输 入任何合法的 gdb 命令，输入的命令将被送到gdb执行。现在，我们在这个窗口中输入“gdb”，按回车后，command-line窗口自动关闭，而在当前窗口上方又打开一个窗口，这个窗口是 gdb 输出窗口。
